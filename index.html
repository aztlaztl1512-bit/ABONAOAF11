<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبار القدرات اللفظي - النموذج 11</title>
    <style>
        :root { --primary-color: #4a148c; --secondary-color: #ff9800; --bg-color: #f3e5f5; --white: #ffffff; --correct-bg: #d4edda; --wrong-bg: #f8d7da; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: var(--bg-color); display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; padding: 20px; }
        .quiz-card { background: var(--white); width: 95%; max-width: 850px; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); border-top: 8px solid var(--primary-color); text-align: center; }
        .header-info { margin-bottom: 25px; border-bottom: 2px solid #eee; padding-bottom: 15px; }
        .challenger-badge { background: var(--secondary-color); color: white; padding: 8px 25px; border-radius: 30px; font-weight: bold; display: inline-block; margin-bottom: 20px; font-size: 1.2rem; }
        input[type="text"] { width: 80%; padding: 12px; border: 2px solid #ddd; border-radius: 10px; font-size: 1.1rem; margin: 20px 0; text-align: center; outline: none; }
        .btn { background: var(--primary-color); color: white; padding: 12px 30px; border: none; border-radius: 10px; font-size: 1.1rem; cursor: pointer; transition: 0.3s; margin: 5px; }
        .btn:hover { background: #6a1b9a; }
        .timer-bar { height: 10px; background: #eee; border-radius: 5px; margin: 20px 0; overflow: hidden; }
        .timer-progress { height: 100%; background: #e74c3c; width: 100%; transition: width 1s linear; }
        .options-container { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 25px; }
        .option { padding: 15px; border: 2px solid #f1f2f6; border-radius: 12px; cursor: pointer; font-weight: 500; transition: 0.2s; text-align: center; }
        .correct-opt { background: #e8f5e9 !important; border-color: #2ecc71 !important; color: #1b5e20; }
        .wrong-opt { background: #ffebee !important; border-color: #e74c3c !important; color: #b71c1c; }
        .feedback { margin-top: 20px; padding: 20px; border-radius: 12px; display: none; background: #f8f9fa; text-align: right; border-right: 5px solid var(--primary-color); line-height: 1.6; }
        .summary-item { padding: 15px; border-bottom: 1px solid #eee; margin-bottom: 10px; border-radius: 8px; text-align: right; }
        .summary-correct { background-color: var(--correct-bg); border-right: 5px solid #28a745; }
        .summary-wrong { background-color: var(--wrong-bg); border-right: 5px solid #dc3545; }
        .hidden { display: none; }
    </style>
</head>
<body>

<div class="quiz-card">
    <div class="header-info">
        <div style="font-weight: bold; color: var(--primary-color);">ثانوية الأمير عبدالمجيد</div>
        <div style="color: #7f8c8d;">أ / عبدالعزيز الفيفي</div>
        <h1>اختبار التناظر اللفظي - النموذج 11</h1>
    </div>

    <div id="start-page">
        <p>تحدي الـ 36 سؤالاً </p>
        <input type="text" id="studentName" placeholder="اكتب اسمك هنا لبدء التحدي...">
        <br>
        <button class="btn" onclick="startQuiz()">ابدأ الاختبار</button>
    </div>

    <div id="quiz-page" class="hidden">
        <div class="challenger-badge">المتحدي: <span id="display-name"></span></div>
        <div style="display: flex; justify-content: space-between;">
            <span>السؤال: <b id="q-num">1</b> / 36</span>
            <span style="color: #e74c3c;">الوقت: <b id="timer-text">45</b> ث</span>
        </div>
        <div class="timer-bar"><div id="timer-line" class="timer-progress"></div></div>
        <h2 id="question-text"></h2>
        <div class="options-container" id="options"></div>
        <div id="feedback" class="feedback"></div>
        <button id="next-btn" class="btn hidden" onclick="loadNextQuestion()">السؤال التالي</button>
    </div>

    <div id="result-page" class="hidden">
        <h2 id="score-text"></h2>
        <div id="quiz-summary" style="max-height: 400px; overflow-y: auto;"></div>
        <button class="btn" onclick="location.reload()">إعادة الاختبار</button>
    </div>
</div>

<script>
    const masterQuestions = [
        { q: "رياح : هواء", correct: "طوفان : ماء", a: ["برق : رعد", "سحاب : ثلج", "طوفان : ماء", "بركان : حمم"], why: "العلاقة (حالة من الاندفاع الشديد): الرياح هواء مندفع، والطوفان ماء مندفع." },
        { q: "شاشة : قناة", correct: "سور : حديقة", a: ["تلفاز : برامج", "شاطئ : مسبح", "سور : حديقة", "صورة : اطار"], why: "العلاقة (إحاطة أو وسيلة عرض): الشاشة تعرض القناة، والسور يحيط بالحديقة." },
        { q: "فاتورة : تسديد", correct: "بلاء : صبر", a: ["يد : بطش", "جوع : طعام", "زواج : ذرية", "بلاء : صبر"], why: "العلاقة (التعامل المطلوب): الفاتورة تتطلب تسديداً، والبلاء يتطلب صبراً." },
        { q: "النفط : السواد", correct: "القطن : الخفة", a: ["الثعلب : السرعة", "القطن : الخفة", "الصقر : الوداعة", "الشتاء : الخضرة"], why: "العلاقة (الشيء وصفته الملازمة): النفط يتميز بالسواد، والقطن يتميز بالخفة." },
        { q: "جنين : ولادة", correct: "سهم : رمي", a: ["سيف : قطع", "سهم : رمي", "مسدس : قتل", "عصا : ضرب"], why: "العلاقة (الخروج بقوة/انطلاق): الجنين يخرج بالولادة، والسهم يخرج بالرمي." },
        { q: "نور : ضياء", correct: "مسكين : فقير", a: ["مسكين : فقير", "صفر : شوال", "رمل : زجاج", "بصم : اصبع"], why: "العلاقة (ترادف): النور هو الضياء، والمسكين هو الفقير." },
        { q: "فاكهة : عنب", correct: "حيوان : حصان", a: ["ليمون : برتقال", "لوز : فستق", "حيوان : حصان", "ابتلاء : اختبار"], why: "العلاقة (فئة وفرد منها): العنب من الفواكه، والحصان من الحيوانات." },
        { q: "كتابة : يد", correct: "لطم : قبضة", a: ["فكر : عقل", "بصيرة : عين", "لطم : قبضة", "سماعة : أذن"], why: "العلاقة (الفعل والأداة المستخدمة): الكتابة باليد، واللطم بالقبضة." },
        { q: "طول : عرض", correct: "عمق : ارتفاع", a: ["عمق : ارتفاع", "كتلة : حجم", "صندوق : عامود", "بحيرة : نهر"], why: "العلاقة (أبعاد): الطول والعرض أبعاد، والعمق والارتفاع أبعاد." },
        { q: "الياسمين : الشذى", correct: "الكادي : الأريج", a: ["الجوري : الفل", "الكادي : الأريج", "الزنبق : الخزامى", "السوسن : النرجس"], why: "العلاقة (الزهر ورائحته): الياسمين له شذى، والكادي له أريج." },
        { q: "استهتار : ضياع", correct: "جفاف : ذبول", a: ["جفاف : ذبول", "هموم : فرح", "اقتراض : دين", "عمل : كسل"], why: "العلاقة (سبب ونتيجة): الاستهتار يؤدي للضياع، والجفاف يؤدي للذبول." },
        { q: "لمح : عين", correct: "اشارة : يد", a: ["سمع : أذن", "تذوق : فم", "اشارة : يد", "رأس : إيماء"], why: "العلاقة (الفعل والعضو): اللمح بالعين، والإشارة باليد." },
        { q: "حقل : نفط", correct: "مزرعة : ثمار", a: ["مزرعة : ثمار", "سيارة : وقود", "اشارة : تقاطع", "نقود : محفظة"], why: "العلاقة (مكان الاستخراج): النفط من الحقل، والثمار من المزرعة." },
        { q: "لسان : ذوق", correct: "أنف : شم", a: ["شم : أنف", "أنف : شم", "تفكير : عقل", "عين بصيرة"], why: "العلاقة (عضو ووظيفة): اللسان للذوق، والأنف للشم." },
        { q: "بلح : تمر", correct: "عنب : زبيب", a: ["تفاح : عصير", "عنب : زبيب", "برتقال : حمضيات", "خيار : جزر"], why: "العلاقة (مرحلية): البلح يتحول لتمر، والعنب يتحول لزبيب." },
        { q: "ظلف : ماعز", correct: "سنبك : خيل", a: ["سنبك : خيل", "خف : فيل", "سنام : جمل", "مخلب : أسد"], why: "العلاقة (نهاية قدم الحيوان): الماعز له ظلف، والخيل له سنبك." },
        { q: "حر : مكيف", correct: "مطر : مظلة", a: ["حرارة : ترمومتر", "فيلا : مسبح", "مطر : مظلة", "مصل : مناعة"], why: "العلاقة (الوقاية): المكيف يقي من الحر، والمظلة تقي من المطر." },
        { q: "عمق : بحر", correct: "ارتفاع : جبل", a: ["شهيق : زفير", "ارتفاع : جبل", "حديد : ثقل", "قطن : خفة"], why: "العلاقة (صفة مادية بارزة): البحر يتميز بالعمق، والجبل يتميز بالارتفاع." },
        { q: "سكان : دولة", correct: "روضة : أزهار", a: ["منازل : مدينة", "روضة : أزهار", "جبال : رواسي", "محطة : فندق"], why: "العلاقة (احتواء): الدولة تضم سكان، والروضة تضم أزهار." },
        { q: "سكر : ذوبان", correct: "دخان : انتشار", a: ["رئيس : أمريكا", "زاوية : مثلث", "دخان : انتشار", "رمادي : أسود"], why: "العلاقة (خاصية طبيعية): السكر يذوب، والدخان ينتشر." },
        { q: "دولة : حدود", correct: "صورة : اطار", a: ["صورة : اطار", "بيت : جدار", "ضفة : نهر", "كأس : ماء"], why: "العلاقة (إحاطة): الحدود تحيط بالدولة، والإطار يحيط بالصورة." },
        { q: "أسد : قوة", correct: "مرونة : ثعبان", a: ["كلب : حراسة", "مرونة : ثعبان", "رجُل : مشي", "صقر : رؤية"], why: "العلاقة (صفة معنوية ملازمة): الأسد رمز القوة، والثعبان رمز المرونة." },
        { q: "محلول : مختبر", correct: "خيل : إسطبل", a: ["سماحة : دين", "ثلوج : جليد", "خيل : إسطبل", "قوة : جماعة"], why: "العلاقة (مكان التواجد): المحلول في المختبر، والخيل في الإسطبل." },
        { q: "تهجد : ليل", correct: "عمل : نهار", a: ["عمل : نهار", "حج : مكة", "اللحم : جزار", "فراش : نوم"], why: "العلاقة (زمانية): التهجد وقت الليل، والعمل وقت النهار." },
        { q: "سرور : جَذَل", correct: "حب : عشق", a: ["ضحكة : ابتسامة", "حب : عشق", "بغض : حقد", "نوم : راحة"], why: "العلاقة (ترادف/تدرج): السرور هو الجذل، والحب هو العشق." },
        { q: "بشر : طين", correct: "سيف : حديد", a: ["حديد : رمح", "شجر : أغصان", "رماد : نار", "سيف : حديد"], why: "العلاقة (أصل الصنع): البشر من طين، والسيف من حديد." },
        { q: "ينبوع : منهل", correct: "أسد : ليث", a: ["الثرى : الثريا", "منجل : حصاد", "أسد : ليث", "شعبان : رمضان"], why: "العلاقة (ترادف): الينبوع هو المنهل، والأسد هو الليث." },
        { q: "ضب : صحراء", correct: "أسد : أدغال", a: ["أسد : أدغال", "طفل : حضانة", "قرد : حديقة", "سلحفاة : صحراء"], why: "العلاقة (كائن وبيئته): الضب في الصحراء (تصحيح للسؤال)، والأسد في الأدغال." },
        { q: "يترنح : يمشي", correct: "يتهجى : يقرأ", a: ["يتسكع : يلعب", "يتهجى : يقرأ", "يستريح : يتدرب", "يأكل : يشرب"], why: "العلاقة (بداية أو تعثر في الفعل): المترنح يمشي بصعوبة، والمتهجي يقرأ بصعوبة." },
        { q: "ثياب : بدن", correct: "تقوى : روح", a: ["تقوى : روح", "رأس : صدر", "ذهب : فضة", "حزام : خاتم"], why: "العلاقة (لباس/ستر): الثياب تستر البدن، والتقوى تستر الروح (لباس التقوى)." },
        { q: "أحمر : خطر", correct: "أبيض : نقاء", a: ["أصفر : صحراء", "أبيض : نقاء", "أزرق : سماء", "أخضر : عشب"], why: "العلاقة (اللون ودلالته): الأحمر يرمز للخطر، والأبيض يرمز للنقاء." },
        { q: "جاذبية : سقوط", correct: "زلزال : انهيار", a: ["زلزال : انهيار", "صيف : حرارة", "سخونة : انفجار", "حادث : سرعة"], why: "العلاقة (سبب ونتيجة): الجاذبية تسبب السقوط، والزلزال يسبب الانهيار." },
        { q: "معمل : أدوية", correct: "نحل : عسل", a: ["عسل : نحل", "نحل : عسل", "طائر : بيض", "زهر : ثمر"], why: "العلاقة (مكان الإنتاج): المعمل ينتج أدوية، والنحل ينتج عسلاً (مصححة)." },
        { q: "استثمار : وظائف", correct: "انتاج : عملات صعبة", a: ["حرب : خسائر", "حرائق : تدمير", "زلزال : خراب", "انتاج : عملات صعبة"], why: "العلاقة (سبب ونتيجة إيجابية): الاستثمار يوفر وظائف، والإنتاج يوفر عملات صعبة." },
        { q: "الفلاة : الصحراء", correct: "المهند : الحسام", a: ["الأعمى : البصير", "الصحة : اللياقة", "المهند : الحسام", "السباق : الحصان"], why: "العلاقة (ترادف): الفلاة هي الصحراء، والمهند هو الحسام." }
    ];

    let questions = []; let currentQ = 0; let score = 0; let timer; let timeLeft = 45; let userAnswers = [];

    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function startQuiz() {
        const name = document.getElementById('studentName').value.trim();
        if(!name) { alert("من فضلك اكتب اسمك لبدء التحدي"); return; }
        document.getElementById('display-name').innerText = name;
        questions = [...masterQuestions];
        document.getElementById('start-page').classList.add('hidden');
        document.getElementById('quiz-page').classList.remove('hidden');
        loadQuestion();
    }

    function loadQuestion() {
        if(currentQ >= questions.length) { finishQuiz(); return; }
        const qData = questions[currentQ];
        const shuffledOptions = shuffle([...qData.a]);
        document.getElementById('q-num').innerText = currentQ + 1;
        document.getElementById('question-text').innerText = (currentQ + 1) + ") " + qData.q;
        document.getElementById('feedback').style.display = 'none';
        document.getElementById('next-btn').classList.add('hidden');
        const optDiv = document.getElementById('options');
        optDiv.innerHTML = '';
        shuffledOptions.forEach(opt => {
            const d = document.createElement('div');
            d.className = 'option'; d.innerText = opt;
            d.onclick = () => checkAnswer(opt, d);
            optDiv.appendChild(d);
        });
        startTimer();
    }

    function startTimer() {
        clearInterval(timer); timeLeft = 45;
        const line = document.getElementById('timer-line');
        const txt = document.getElementById('timer-text');
        timer = setInterval(() => {
            timeLeft--; txt.innerText = timeLeft;
            line.style.width = (timeLeft/45)*100 + '%';
            if(timeLeft <= 0) { clearInterval(timer); checkAnswer(null, null); }
        }, 1000);
    }

    function checkAnswer(sel, el) {
        clearInterval(timer);
        const qData = questions[currentQ];
        const isCorrect = (sel === qData.correct);
        userAnswers.push({ q: qData.q, sel: sel || "تجاوز الوقت", cor: qData.correct, isCorrect, why: qData.why });
        document.querySelectorAll('.option').forEach(o => o.onclick = null);
        if(isCorrect) { score++; if(el) el.classList.add('correct-opt'); } 
        else { if(el) el.classList.add('wrong-opt'); document.querySelectorAll('.option').forEach(o => { if(o.innerText === qData.correct) o.classList.add('correct-opt'); }); }
        const f = document.getElementById('feedback');
        f.innerHTML = `<strong>${isCorrect ? '✅ صحيح' : '❌ خطأ'}</strong><br>${qData.why}`;
        f.style.display = 'block';
        document.getElementById('next-btn').classList.remove('hidden');
    }

    function loadNextQuestion() { currentQ++; loadQuestion(); }

    function finishQuiz() {
        document.getElementById('quiz-page').classList.add('hidden');
        document.getElementById('result-page').classList.remove('hidden');
        document.getElementById('score-text').innerHTML = `النتيجة النهائية: ${score} من 36`;
        const sum = document.getElementById('quiz-summary');
        userAnswers.forEach((ans, i) => {
            const d = document.createElement('div');
            d.className = `summary-item ${ans.isCorrect ? 'summary-correct' : 'summary-wrong'}`;
            d.innerHTML = `<b>س${i+1}: ${ans.q}</b><br>إجابتك: ${ans.sel} | الصحيحة: ${ans.cor}<br><small>${ans.why}</small>`;
            sum.appendChild(d);
        });
    }
</script>
</body>
</html>